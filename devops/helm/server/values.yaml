replicaCount: 1

autoscaling:
  enabled: true
  minReplicas: 1
  maxReplicas: 5
  targetCPUUtilizationPercentage: 25
  # targetMemoryUtilizationPercentage: 80

# Monitoring configuration for Prometheus integration
monitoring:
  enabled: true
  metricsPath: /metrics
  scrapeInterval: 30s

resources:
  limits:
    cpu: 500m
    memory: 2Gi
  requests:
    cpu: 75m
    memory: 256Mi

image:
  repository: dhruvre/devops-server # DOCKER_USERNAME/devops-server
  pullPolicy: IfNotPresent
  tag: "v0.8.5" # IMAGE_TAG

fullnameOverride: els-server

service:
  type: NodePort
  port: 1337
  targetPort: 1337
  nodePort: 30002

ingress:
  enabled: true
  className: "nginx"
  annotations: {}
    # kubernetes.io/ingress.class: nginx
  hosts:
    - host: els-server.local
      paths:
        - path: /
          pathType: Prefix

env:
  # Strapi Server Configuration
  HOST: "0.0.0.0"
  PORT: "1337"
  NODE_ENV: development
  
  # ⚠️ IMPORTANT: Replace these secrets in production!
  # Generate new keys with: openssl rand -base64 32
  # These are default development keys - change them if you need different values
  APP_KEYS: "+QtWQuJKp9IfkFWEtiXO8Q==,D1T2egPj8JmFs5TZnMth9g==,mssqCHe6hcR/BS7V+6owpw==,agB7crD33vhRZlIuePNpwA=="
  API_TOKEN_SALT: "8ezEvnYn0GzYWH8v0TF8zQ=="
  ADMIN_JWT_SECRET: "Rdb/CW49MBxCAN9EkAq09Q=="
  JWT_SECRET: "8Gq9l2kUZlnNq8Bq4LW28w=="
  TRANSFER_TOKEN_SALT: "l9HDxb7NepKQ5UoJ5/bIlA=="
  
  # External Services (customize if needed)
  CENTRALIZED_SERVER: "http://127.0.0.1:1337"
  ABLY_API_KEY: "CAtV_w.YQ2YJA:CFTY08KNi__TxbRH5bTjFRgjWPUjYwj8mCLFNtccCeA"
  
  # PostgreSQL Database Configuration
  # Using FQDN for reliable service discovery
  DATABASE_CLIENT: postgres
  DATABASE_HOST: els-postgres.els-devops-system.svc.cluster.local
  DATABASE_PORT: "5432"
  DATABASE_NAME: strapi
  DATABASE_USERNAME: strapi
  DATABASE_PASSWORD: strapi
  DATABASE_SSL: "false"

persistence:
  enabled: true
  size: 1Gi
  accessMode: ReadWriteOnce

sidecars: []
